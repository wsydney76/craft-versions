{% import "_includes/forms" as forms %}

{{ forms.selectField({
    first: true,
    label: 'Show Internal Column'|t('versions'),
    name: 'showInternal',
    instructions: 'Show internal informations like ids'|t('versions'),
    options:[
        {label: 'Never'|t('versions'), value:'never'},
        {label: 'Always'|t('versions'), value:'always'},
        {label: 'Show for admin users only'|t('versions'), value:'admin'},
        {label: 'Only if devMode=true'|t('versions'), value:'dev'}
    ],
    value: settings.showInternal
}) }}

{{ forms.selectField({
    label: 'Allow edit source'|t('versions'),
    name: 'allowEditSource',
    instructions: 'Is editing and saving source entry allowed without using a draft'|t('versions'),
    options:[
        {label: 'Always'|t('versions'), value:'always'},
        {label: 'Never'|t('versions'), value:'never'},
        {label: 'Only if no drafts exist'|t('versions'), value:'nodrafts'}
    ],
    value: settings.allowEditSource
}) }}


{{ forms.lightswitchField({
    label: 'Enable preview for source entries'|t('versions'),
    name: 'allowPreviewForSourceEntries',
    instructions: 'If enabled, the preview button will not be shown for source entries, therefor the user has to create a draft manually'|t('versions'),
    on: settings.allowPreviewForSourceEntries
}) }}



{{ forms.lightswitchField({
    label: 'Allow multiple drafts'|t('versions'),
    name: 'allowMultipleDrafts',
    instructions: 'If enabled, it will be possible to create multiple drafts'|t('versions'),
    on: settings.allowMultipleDrafts
}) }}


{{ forms.lightswitchField({
    label: 'Allow saving drafts from all sites'|t('versions'),
    name: 'enableDraftSaveFromAllSites',
    instructions: 'If enabled, it will be possible to save drafts from all sites.
This should be disabled if dynamic values as image folders are build from site specific values like a slug.'|t('versions'),
    on: settings.enableDraftSaveFromAllSites
}) }}

{% set options = craft.app.sections.allSections
    |filter(s => s.type in ['channel','structure'])
    |map(s => {label:s.name, value:s.handle}) %}

{{ forms.checkboxSelectField({
    label: 'Allow save via HUD'|t('versions'),
    name: 'allowSaveHUD',
    instructions: 'If enabled, it will always be possible to save an entry in a HUD'|t('versions'),
    options: options,
    values: settings.allowSaveHUD
}) }}

{{ forms.textField({
    label: 'Caption for Help Url',
    name: 'helpCaption',
    instructions: 'This caption will be shown on a help button for the url below',
    value: settings.helpCaption
}) }}

{{ forms.textField({
    label: 'Help Url',
    name: 'helpUrl',
    instructions: 'A link to further help, has to work in cp, so start with /' ~ craft.app.config.general.cpTrigger,
    value: settings.helpUrl
}) }}

{{ forms.lightswitchField({
    label: 'Enable Permissions to ignore restrictions'|t('versions'),
    name: 'enablePermissions',
    instructions: 'If enabled, admins and user with the "Ignore Workflow Restrictions" permission will not be restricted in their possible actions.'|t('versions'),
    on: settings.enablePermissions
}) }}
